<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" />
<script src="microajax.js"></script>
<body>
    <a onclick="window.history.back()" class="btn btn--s"><</a>&nbsp;&nbsp;<strong>Update Firmware</strong>
    <hr>
    <form method='POST' action='/update' enctype='multipart/form-data'>
        <table>
            <tr>
                <td>
                    <input id="fileName" type='file' name='update' disabled>
                </td>
            </tr>
            <tr>
                <td>
                    <input id="updateButton" type='submit' value='Update' disabled>
                </td>
            </tr>
            <tr>
                <td>
                    Checking if remote update is possible... <span id="remupd"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <span id="remupdResult"></span>
                </td>
            </tr>
        </table>
    </form>
</body>
  <script>
      function GetState() {
          setValues("/admin/updatepossible")
          setTimeout(function () {
              if (document.getElementById("remupd").innerHTML == "OK") {
                  console.warn("ERROR = OK");
                  document.getElementById("fileName").disabled = false;
                  document.getElementById("updateButton").disabled = false;
                  document.getElementById("remupdResult").innerHTML = "";
              }
          },2000);
      }

        window.onload = function () {
            load("style.css", "css", function () {
                load("microajax.js", "js", function () {
                    GetState();
                });
            });
        }

      document.getElementById("remupd").on

        function load(e, t, n) {
            if ("js" == t) {
                var a = document.createElement("script");
                a.src = e,
                a.type = "text/javascript",
                a.async = !1,
                a.onload = function () { n() },
                document.getElementsByTagName("head")[0].appendChild(a)
            } else if ("css" == t) {
                var a = document.createElement("link");
                a.href = e,
                a.rel = "stylesheet",
                a.type = "text/css",
                a.async = !1,
                a.onload = function () { n() },
                document.getElementsByTagName("head")[0].appendChild(a)
            }
        }



    </script>